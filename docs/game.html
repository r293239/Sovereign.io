<!DOCTYPE html>
<html>
<head>
    <title>Sovereign.io - Game</title>
    <style>
        /* Copy all the game CSS from our previous working version */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0a0a; color: white; font-family: Arial; overflow: hidden; }
        .container { max-width: 1200px; margin: 0 auto; padding: 10px; height: 100vh; display: flex; flex-direction: column; }
        .header { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background: #1a1a1a; border-radius: 8px; margin-bottom: 10px; }
        .game-area { display: flex; gap: 15px; flex: 1; min-height: 0; }
        .map-container { position: relative; flex: 1; background: #111; border-radius: 8px; border: 2px solid #3498db; }
        #gameCanvas { width: 100%; height: 100%; display: block; cursor: crosshair; }
        .control-panel { width: 300px; background: #1a1a1a; border-radius: 8px; padding: 15px; display: flex; flex-direction: column; gap: 15px; overflow-y: auto; }
        /* ... include all the other game CSS rules from before ... */
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè∞ Sovereign.io - <span id="playerName">Player</span></h1>
            <div class="balance-display">
                <span>Balance:</span>
                <div class="balance-bar"><div id="balanceFill" class="balance-fill" style="width: 100%"></div></div>
                <span id="balanceText">1000</span>
            </div>
            <button onclick="window.location.href = 'index.html'">‚Üê Main Menu</button>
        </div>

        <div class="game-area">
            <div class="map-container">
                <canvas id="gameCanvas" width="800" height="600"></canvas>
            </div>
            
            <div class="control-panel">
                <!-- Include all the game control panels from before -->
                <div class="panel-section">
                    <h3>‚öîÔ∏è Deploy Troops</h3>
                    <div class="percentage-buttons">
                        <button onclick="sendTroops(0.1)">Send 10%</button>
                        <button onclick="sendTroops(0.25)">Send 25%</button>
                        <button onclick="sendTroops(0.5)">Send 50%</button>
                        <button onclick="sendTroops(0.75)">Send 75%</button>
                        <button onclick="sendTroops(1)">Send 100%</button>
                    </div>
                </div>

                <!-- Include research tree, game info, etc. -->
            </div>
        </div>
    </div>

    <script>
        // Load game settings
        const settings = JSON.parse(localStorage.getItem('sovereignio_settings') || '{}');
        document.getElementById('playerName').textContent = settings.username || 'Player';

        // Include all the game JavaScript from our working version
        const gameState = {
            player: {
                balance: 1000,
                maxBalance: 1000,
                income: 50,
                territories: new Set(),
                frontlines: [],
                research: new Set(),
                mode: 'expansion',
                username: settings.username || 'Player'
            },
            enemies: [],
            map: [],
            difficulty: settings.difficulty || 'medium'
        };

        // Initialize the game with settings
        function initGame() {
            // Your existing game initialization code here
            createMap();
            setupPlayer();
            setupEnemies();
            // ... etc
        }

        // Start the game
        initGame();
    </script>
</body>
</html>
